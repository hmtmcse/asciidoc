buildscript {
    repositories {
        mavenLocal()
        jcenter()
        maven { url "https://plugins.gradle.org/m2/" }
    }

    dependencies {
        classpath "org.asciidoctor:asciidoctor-gradle-jvm:2.3.0"
    }
}




repositories {
    mavenLocal()
    jcenter()
    maven { url "https://dl.bintray.com/hmtmcse/maven/" }
    maven { url "http://central.maven.org/maven2/" }
}

apply plugin: 'org.asciidoctor.convert'
apply plugin:'java'
apply plugin:'groovy'

version '1.0.0'

dependencies {
    compile group: 'org.asciidoctor', name: 'asciidoctorj', version: '2.1.0'
    compile 'com.github.allati.asciidoctor.monotree:asciidoctor-extension-monotree:0.0.1'
    compile 'org.codehaus.groovy:groovy:2.5.6'
    compile project(':java-text-and-file-util')
    compile project(':java-shell-util')
    compile project(':java-common')
}


jar{
    manifest {
        attributes (
                'Implementation-Title': 'HMTM AsciiDoctor Text To Web',
                'Implementation-Version': version,
                'Main-Class': 'com.hmtmcse.texttoweb.console.TextToWebMain'
        )
    }
}

asciidoctorj {
    version = '2.1.0'
}


def docSource = 'asciidoc'
def docHtml = 'docs'
asciidoctor {
    sourceDir = file(docSource)
    outputDir = file(docHtml)
    resources {
        from(sourceDir) {
            include 'images/**'
        }
    }
    attributes 'toc': 'left',
    'source-highlighter': 'coderay'
}

asciidoctor.doLast {
    copy {
        from "${docHtml}/html5"
        into "$docHtml"
    }
    delete {
        delete "${docHtml}/html5"
    }
}

asciidoctor.doFirst {
    delete {
        delete "$docHtml"
    }
}

